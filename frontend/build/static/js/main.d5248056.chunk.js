(this["webpackJsonpon-the-house"]=this["webpackJsonpon-the-house"]||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),s=a.n(o),i=a(8),l=a(9),c=a(11),u=a(10),m=a(12),p=(a(73),a(17)),d=a.n(p),h=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"GET_ERRORS",payload:{msg:e,status:t,id:a}}},E=a(58),f=a.n(E),g=a(29),y=a(18),b=a(13),C=(a(97),a(60)),O=a.n(C),v=a(146),w=a(124),S=a(125),j=a(126),N=a(127),D=a(123),P=a(128),A=a(129),k=a(130),T=a(131),I=a(132),_=(a(98),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,{id:"userLoggedInButton",onClick:this.props.handleLogoutUser,tag:y.b,to:"/"},"Sign Out")}}]),t}(n.Component)),x=Object(b.b)((function(e){return{}}),(function(e){return{handleLogoutUser:function(){return e((console.log("Successfully logged out!"),{type:"LOGOUT_SUCCESS"}))},handleClearErrors:function(){return e({type:"CLEAR_ERRORS"})}}}))(_),U=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1,dropdownOpen:!1,color:""},a.toggle=function(){return a.setState({isOpen:!a.state.isOpen,dropdownOpen:!a.state.dropdownOpen})},a.listenScrollEvent=function(e){window.scrollY>50?a.setState({color:"color-transition-nav"}):a.setState({color:"transparent-nav"})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.listenScrollEvent)}},{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,a=e.user,o=r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:"usrName"},r.a.createElement(v.a,{nav:!0,inNavbar:!0},r.a.createElement(w.a,{nav:!0,caret:!0},r.a.createElement("span",{id:"signedInDropdown"},"My Account")),r.a.createElement(S.a,null,r.a.createElement(j.a,{className:"dropdown-menu-right"},"Logged in as: ",r.a.createElement("span",{id:"dynamicUserGreeting"},a?"".concat(a.firstName," ").concat(a.lastName):"")),r.a.createElement(j.a,{className:"dropdown-menu-right"},r.a.createElement(x,null)))))),s=r.a.createElement(n.Fragment,null,r.a.createElement(N.a,null,r.a.createElement(D.a,{id:"signInButton",tag:y.b,to:"/users/login"},"Sign In")));return r.a.createElement("div",null,r.a.createElement(P.a,{className:"navbar navbar-expand-lg navbar-light fixed-top ".concat(this.state.color)},r.a.createElement(A.a,{tag:y.b,to:"/"},r.a.createElement("img",{className:"Logo",src:O.a})),r.a.createElement(k.a,{onClick:this.toggle},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement(T.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(I.a,{className:"mr-auto mt-2 mt-lg-0",navbar:!0},r.a.createElement(N.a,{className:"active"},r.a.createElement(D.a,{className:"nl",tag:y.b,to:"/"},"Home")),r.a.createElement(N.a,null,r.a.createElement(D.a,{tag:y.b,to:"/About"},"About")),r.a.createElement(N.a,null,r.a.createElement(D.a,{tag:y.b,to:"/PostTable"},"Posts")),t?o:s))))}}]),t}(n.Component),B=Object(b.b)((function(e){return{auth:e.auth}}))(U),R=a(19),F=(a(108),a(133)),M=a(134),V=a(147),L=a(135),W=a(136),G=a(137),H=a(63),z=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",msg:null},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),a.props.handleClearErrors();var t=a.state,n={email:t.email,password:t.password};a.props.handleLoginUser(n)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.error,n=t.isAuthenticated;if(a!==e.error&&("LOGIN_FAIL"===a.id?this.setState({msg:"Incorrect email or password"}):this.setState({msg:null})),n&&this.props.userObject.verified)this.props.history.push("/PostTable");else if(n){this.props.history.push("/")}}},{key:"requiredFieldsFilled",value:function(){var e=this.state,t=e.email,a=e.password;return t.length>0&&a.length>0}},{key:"render",value:function(){return r.a.createElement("div",{id:"pageBackground"},r.a.createElement("div",{className:"styles"},r.a.createElement(F.a,null,r.a.createElement("div",{className:"row"},r.a.createElement(M.a,{md:"4"}),r.a.createElement(M.a,{md:"4",id:"loginCol"},r.a.createElement("h1",{id:"signInHeader"},"Sign in"),this.state.msg?r.a.createElement(V.a,{color:"danger"},this.state.msg):null,r.a.createElement(L.a,{onSubmit:this.onSubmit,id:"formSubmit"},r.a.createElement(W.a,{row:!0},r.a.createElement(M.a,null,r.a.createElement(G.a,{type:"email",name:"email",id:"uciEmail",onChange:this.onChange,placeholder:"UCI email"}))),r.a.createElement(W.a,{row:!0},r.a.createElement(M.a,null,r.a.createElement(G.a,{className:this.state.passwordErrorBorder,type:"password",name:"password",id:"userPassword",onChange:this.onChange,placeholder:"Password"}))),r.a.createElement(H.a,{type:"submit",className:"login"},"Login"))),r.a.createElement(M.a,{xs:"4"})))))}}]),t}(n.Component),J=Object(b.b)((function(e){return{authAction:e.auth,isAuthenticated:e.auth.isAuthenticated,error:e.error,userObject:e.auth.user}}),(function(e){return{handleLoginUser:function(t){return e(function(e){var t=e.email,a=e.password;return function(e){var n=JSON.stringify({email:t,password:a});console.log(n),d.a.post("/users/login",n,{headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*",crossDomain:!0}}).then((function(t){e({type:"LOGIN_SUCCESS",payload:t.data})})).catch((function(t){console.log(t),e(h(t.response.data,t.response.status,"LOGIN_FAIL")),e({type:"LOGIN_FAIL"})}))}}(t))},handleClearErrors:function(){return e({type:"CLEAR_ERRORS"})}}}))(z),q=(a(109),a(110),a(139)),$=(a(111),a(138)),Y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:"",lastName:"",DOB:"",email:"",password:"",msg:null,dobErrorBorder:"",dobErrorMessage:"",emailErrorBorder:"",emailErrorMessage:"",passwordErrorBorder:"",passwordErrorMessage:""},a.onChange=function(e){console.log(typeof e.target.value),a.setState(Object(R.a)({},e.target.name,e.target.value))},a.onChangeDate=function(e){var t=new Date(e.target.value);a.setState(Object(R.a)({},e.target.name,t))},a.onSubmit=function(e){e.preventDefault(),a.props.handleClearErrors(),a.setState({msg:null,dobErrorBorder:"",dobErrorMessage:"",emailErrorBorder:"",emailErrorMessage:"",passwordErrorBorder:"",passwordErrorMessage:""});var t=a.validateCases(),n=a.state,r={firstName:n.firstName,lastName:n.lastName,DOB:n.DOB,email:n.email,password:n.password};t&&a.props.handleRegisterUser(r)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.error;t!==e.error&&"REGISTER_FAIL"===t.id&&"MongoError"===t.msg.name&&this.setState({msg:"User already exists!"})}},{key:"requiredFieldsFilled",value:function(){var e=this.state,t=e.firstName,a=e.lastName,n=e.DOB,r=e.email,o=e.password;return t.length>0&&a.length>0&&void 0===n.length&&r.length>0&&o.length>0}},{key:"validateCases",value:function(){if("uci.edu"!==this.state.email.split("@")[1])return this.setState({msg:"Email must be UCI email.",emailErrorBorder:"errorBorder",emailErrorMessage:"errorMessage"}),!1;if(this.state.password.toLowerCase().includes("password"))return this.setState({msg:"Password cannot contain keyword: 'password'",passwordErrorBorder:"errorBorder",passwordErrorMessage:"errorMessage"}),!1;return/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[^\w\s]).{8,}$/.test(this.state.password)?!((new Date).getFullYear()-this.state.DOB.getFullYear()<13)||(this.setState({msg:"Must be at least 13 years old to register.",dobErrorBorder:"errorBorder",dobErrorMessage:"errorMessage"}),!1):(this.setState({msg:"Password must meet the following requirements:\n Minimum 8 characters including at least 1 digit, 1 uppercase letter, 1 lowercase letter, and 1 special character",passwordErrorBorder:"errorBorder",passwordErrorMessage:"errorMessage"}),!1)}},{key:"render",value:function(){var e=this.requiredFieldsFilled();return r.a.createElement("div",{className:"styles"},r.a.createElement(F.a,null,r.a.createElement("div",{className:"row"},r.a.createElement(M.a,{md:"2"}),r.a.createElement(M.a,{md:"8"},r.a.createElement("div",{className:"signUpContain"},this.state.msg?r.a.createElement(V.a,{color:"danger"},this.state.msg):null,r.a.createElement(L.a,{onSubmit:this.onSubmit},r.a.createElement(W.a,{row:!0},r.a.createElement(M.a,null,r.a.createElement($.a,{className:"d-flex justify-content-start",for:"firstName"},"First Name"),r.a.createElement(G.a,{type:"text",name:"firstName",id:"firstName",onChange:this.onChange,placeholder:"First Name"}))),r.a.createElement(W.a,{row:!0},r.a.createElement(M.a,null,r.a.createElement($.a,{className:"d-flex justify-content-start",for:"lastName"},"Last Name"),r.a.createElement(G.a,{type:"text",name:"lastName",id:"lastName",onChange:this.onChange,placeholder:"Last Name"}))),r.a.createElement(W.a,{row:!0},r.a.createElement(M.a,null,r.a.createElement($.a,{className:"d-flex justify-content-start ".concat(this.state.dobErrorMessage),for:"enteredDate"},"Date of Birth"),r.a.createElement(G.a,{className:this.state.dobErrorBorder,type:"date",name:"DOB",id:"enteredDate",onChange:this.onChangeDate}))),r.a.createElement(W.a,{row:!0},r.a.createElement(M.a,null,r.a.createElement($.a,{className:"d-flex justify-content-start ".concat(this.state.emailErrorMessage),for:"uciEmail"},"Email"),r.a.createElement(G.a,{type:"email",className:this.state.emailErrorBorder,name:"email",id:"uciEmail",onChange:this.onChange,placeholder:"Enter UCI email"}))),r.a.createElement(W.a,{row:!0},r.a.createElement(M.a,null,r.a.createElement($.a,{className:"d-flex justify-content-start ".concat(this.state.passwordErrorMessage),for:"userPassword"},"Password"),r.a.createElement(G.a,{className:this.state.passwordErrorBorder,type:"password",name:"password",id:"userPassword",onChange:this.onChange,placeholder:"Enter password"}),r.a.createElement("p",{className:"pwHint"},"Must contain at least one upper case letter, one lower case letter, one number, and one special character"))),r.a.createElement(H.a,{type:"submit",className:"d-flex justify-content-start",disabled:!e,action:"/"},"Register")))),r.a.createElement(M.a,{xs:"2"}))))}}]),t}(n.Component),K=Object(b.b)((function(e){return{authAction:e.auth,isAuthenticated:e.auth.isAuthenticated,error:e.error}}),(function(e){return{handleRegisterUser:function(t){return e(function(e){var t=e.firstName,a=e.lastName,n=e.DOB,r=e.email,o=e.password;return function(e){var s=JSON.stringify({firstName:t,lastName:a,DOB:n,email:r,password:o});console.log(s),d.a.post("/users",s,{headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*",crossDomain:!0}}).then((function(t){e({type:"REGISTER_SUCCESS",payload:t.data})})).catch((function(t){console.log(t),e(h(t.response.data,t.response.status,"REGISTER_FAIL")),e({type:"REGISTER_FAIL"})}))}}(t))},handleClearErrors:function(){return e({type:"CLEAR_ERRORS"})}}}))(Y),Z=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"pageBackground"},r.a.createElement("div",{id:"SignUpLandingContainer",className:"container-fluid"},r.a.createElement(F.a,null,r.a.createElement(q.a,null,r.a.createElement(M.a,{md:"5"},r.a.createElement("h1",{id:"othHeaderTitle"},"Built for Anteaters"),r.a.createElement("h5",{style:{fontWeight:"400",fontSize:"1.1rem",marginBottom:"2rem"}},"On The House makes it easier to connect with peers who are in need of housing."),r.a.createElement("h5",{style:{fontWeight:"400",fontSize:"1.1rem",marginBottom:"2rem"}},"Currently the #1 source to accommodate housing for UCI students!"),r.a.createElement("h5",{style:{fontWeight:"400",fontSize:"1.1rem"}},'"Thanks to On The House, my subleasing process has been made easier!" -Current UCI grad student')),r.a.createElement(M.a,{md:"7"},r.a.createElement(K,null))),r.a.createElement(q.a,null,r.a.createElement(M.a,{style:{marginBottom:"2rem"},md:"12"}))),r.a.createElement(q.a,null,r.a.createElement(M.a,{sm:"12"},this.props.authAction.showVerificationWarning?r.a.createElement(V.a,{id:"showVerifyWarningAlert",onClick:this.props.handleOnClickShowVerifyMessage,color:"warning"},"Check your email for a confirmation link. (click this to close)"):null))))}}]),t}(n.Component),Q=Object(b.b)((function(e){return{authAction:e.auth}}),(function(e){return{handleOnClickShowVerifyMessage:function(){return e({type:"USER_DISMISSED_VERIFICATION_WARNING"})}}}))(Z),X=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showVerifyMessge:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement(Q,null),this.props.authAction.bypassVerify?r.a.createElement(V.a,{id:"verifySuccessAlert",onClick:this.props.handleOnClickBypassVerify,color:"success"},"Your account is now verified! (click this to close)"):null)}}]),t}(n.Component),ee=Object(b.b)((function(e){return{authAction:e.auth,isAuthenticated:e.auth.isAuthenticated,error:e.error}}),(function(e){return{handleOnClickBypassVerify:function(){return e({type:"USER_CONFIRMED_VERIFICATION"})}}}))(X),te=a(140),ae=(a(112),function(e){return r.a.createElement("div",{className:"modalBackground"})}),ne=(a(113),function(e){return r.a.createElement("div",{className:"newPostModal"},r.a.createElement("header",{className:"modal_header"},r.a.createElement("h1",null,e.title)),r.a.createElement("section",{className:"modal_content"}),e.children,r.a.createElement("section",{className:"modal_actions"},e.canCancel&&r.a.createElement(H.a,{className:"cancel_btn",color:"danger",onClick:e.handleCancel},"Cancel"),e.canConfirm&&r.a.createElement(H.a,{className:"buttonColor",disabled:e.handleDisabled,onClick:e.handleClickPost},"Post")))}),re=(a(114),function(e){return r.a.createElement("div",{className:"newUpdateModal"},r.a.createElement("header",{className:"modal_header"},r.a.createElement("h1",null,e.title)),r.a.createElement("section",{className:"modal_content"}),e.children,r.a.createElement("section",{className:"modal_actions"},e.canCancel&&r.a.createElement(H.a,{className:"cancel_btn",color:"danger",onClick:e.handleCancel},"Cancel"),e.canConfirm&&r.a.createElement(H.a,{className:"buttonColor",disabled:e.handleDisabled,onClick:e.handleClickPost},"Update")))}),oe=a(35),se=a.n(oe),ie=(a(115),a(36)),le=a.n(ie);function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ue=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={posts:[],postId:"",title:"",description:"",community:"",price:null,showInvalidPriceWarning:!1,errmsg:"",showPostModal:!1,showUpdateModal:!1},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.priceOnChange=function(e){a.setState(Object(R.a)({},e.target.name,Number(e.target.value)))},a.handleNewPostOnClick=function(e){a.setState({showPostModal:!0})},a.handleCancelButton=function(e){return a.setState({postId:"",title:"",description:"",community:"",price:null,showInvalidPriceWarning:!1,errmsg:"",showPostModal:!1})},a.handlePostButton=function(e){if(e.preventDefault(),a.setState({price:null,showInvalidPriceWarning:!1,errmsg:""}),a.validateCases()){var t=a.state,n={title:t.title,description:t.description,community:t.community,price:t.price};a.props.handleCreateNewPost(n,a.props.token),a.setState({showPostModal:!1})}},a.handleUpdatePostOnClick=function(e){a.setState({showUpdateModal:!0})},a.handleUpdateCancelButton=function(e){return a.setState({postId:"",title:"",description:"",community:"",price:null,showInvalidPriceWarning:!1,errmsg:"",showUpdateModal:!1})},a.handleUpdateButton=function(e){if(e.preventDefault(),a.setState({price:null,showInvalidPriceWarning:!1,errmsg:""}),a.validateCases()){var t=a.state,n={title:t.title,description:t.description,community:t.community,price:t.price};a.props.handleUpdatePost(n,a.state.postId,a.props.token),a.setState({showUpdateModal:!1})}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"requiredFieldsFilled",value:function(){var e=this.state,t=e.title,a=e.description,n=e.community;return t.length>0&&a.length>0&&n.length>0&&"Communities"!=n}},{key:"validateCases",value:function(){return!(this.state.price<100||this.state.price>1e4)||(this.setState({errmsg:"The price range must be within $100 and $10000"}),!1)}},{key:"getPostData",value:function(e){return this.state.posts.filter((function(t){return t._id===e}))}},{key:"componentDidMount",value:function(){this.PostsToState()}},{key:"componentDidUpdate",value:function(){this.PostsToState()}},{key:"PostsToState",value:function(){var e=this,t={headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*",crossDomain:!0,Authorization:"Bearer ".concat(this.props.token)}},a=JSON.stringify({});try{d.a.post("/posts/getPosts",a,t).then((function(t){e.setState({posts:t.data.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)}))}),console.log("POST TO STATE \n"),console.log(e.state.posts)}))}catch(n){}}},{key:"updatePosts",value:function(e){this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach((function(t){Object(R.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state,{posts:this.state.posts.filter((function(t){return t._id!==e}))}))}},{key:"render",value:function(){var e=this,t=this.requiredFieldsFilled();return r.a.createElement(r.a.Fragment,null,this.state.showPostModal&&r.a.createElement(ae,null),this.state.showPostModal&&r.a.createElement(ne,{title:"Create a Post",handleClickPost:this.handlePostButton,handleCancel:this.handleCancelButton,handleDisabled:!t,canCancel:!0,canConfirm:!0},this.state.errmsg&&r.a.createElement(V.a,{color:"danger"},this.state.errmsg),r.a.createElement("form",null,r.a.createElement("div",{className:"form-styles"},r.a.createElement("label",{htmlFor:"titleText"},"Title"),r.a.createElement("input",{type:"text",name:"title",id:"titleText",className:"modalTextField",onChange:this.onChange})),r.a.createElement("div",{className:"form-styles"},r.a.createElement("label",{htmlFor:"priceForm"},"Price"),r.a.createElement("input",{type:"number",name:"price",id:"priceForm",className:"modalTextField",min:"100.00",max:"10000.00",step:"1.00",placeholder:"100.00",onChange:this.priceOnChange})),r.a.createElement("div",{className:"form-styles"},r.a.createElement("label",{htmlFor:"descriptionText"},"Description"),r.a.createElement("textarea",{id:"descriptionText",className:"modalTextField",name:"description",rows:"3",onChange:this.onChange})),r.a.createElement("div",{className:"form-styles"},r.a.createElement("label",{htmlFor:"selectCommunity"},"Select Community"),r.a.createElement("select",{id:"selectCommunity",name:"community",onChange:this.onChange,defaultValue:"Communities"},r.a.createElement("option",null,"Communities"),r.a.createElement("option",null,"Ambrose"),r.a.createElement("option",null,"Arroyo Vista"),r.a.createElement("option",null,"Berkeley Court"),r.a.createElement("option",null,"Camino Del Sol"),r.a.createElement("option",null,"Campus Village"),r.a.createElement("option",null,"Columbia Court"),r.a.createElement("option",null,"Cornell Court"),r.a.createElement("option",null,"Dartmouth Court"),r.a.createElement("option",null,"Harvard Court"),r.a.createElement("option",null,"Palo Verde"),r.a.createElement("option",null,"Plaza Verde"),r.a.createElement("option",null,"Puerta del Sol"),r.a.createElement("option",null,"Stanford Court"),r.a.createElement("option",null,"Verano Place"),r.a.createElement("option",null,"Vista Del Campo"),r.a.createElement("option",null,"Vista Del Campo Norte"))))),this.state.showUpdateModal&&r.a.createElement(ae,null),this.state.showUpdateModal&&r.a.createElement(re,{title:"Update a Post",handleClickPost:this.handleUpdateButton,handleCancel:this.handleUpdateCancelButton,handleDisabled:!t,canCancel:!0,canConfirm:!0},this.state.errmsg&&r.a.createElement(V.a,{color:"danger"},this.state.errmsg),r.a.createElement("form",null,r.a.createElement("div",{className:"form-styles"},r.a.createElement("label",{htmlFor:"titleText"},"Title"),r.a.createElement("input",{type:"text",name:"title",id:"titleText",className:"modalTextField",onChange:this.onChange,defaultValue:this.state.title})),r.a.createElement("div",{className:"form-styles"},r.a.createElement("label",{htmlFor:"priceForm"},"Price"),r.a.createElement("input",{type:"number",name:"price",id:"priceForm",className:"modalTextField",min:"100.00",max:"10000.00",step:"1.00",onChange:this.priceOnChange,defaultValue:this.state.price})),r.a.createElement("div",{className:"form-styles"},r.a.createElement("label",{htmlFor:"descriptionText"},"Description"),r.a.createElement("textarea",{id:"descriptionText",className:"modalTextField",name:"description",rows:"3",onChange:this.onChange,defaultValue:this.state.description})),r.a.createElement("div",{className:"form-styles"},r.a.createElement("label",{htmlFor:"selectCommunity"},"Select Community"),r.a.createElement("select",{id:"selectCommunity",name:"community",onChange:this.onChange,defaultValue:this.state.community},r.a.createElement("option",null,"Ambrose"),r.a.createElement("option",null,"Arroyo Vista"),r.a.createElement("option",null,"Berkeley Court"),r.a.createElement("option",null,"Camino Del Sol"),r.a.createElement("option",null,"Campus Village"),r.a.createElement("option",null,"Columbia Court"),r.a.createElement("option",null,"Cornell Court"),r.a.createElement("option",null,"Dartmouth Court"),r.a.createElement("option",null,"Harvard Court"),r.a.createElement("option",null,"Palo Verde"),r.a.createElement("option",null,"Plaza Verde"),r.a.createElement("option",null,"Puerta del Sol"),r.a.createElement("option",null,"Stanford Court"),r.a.createElement("option",null,"Verano Place"),r.a.createElement("option",null,"Vista Del Campo"),r.a.createElement("option",null,"Vista Del Campo Norte"))))),r.a.createElement("div",{className:"PostDiv"},r.a.createElement(H.a,{id:"createPost",onClick:this.handleNewPostOnClick},"New Post"),this.state.posts.map((function(t){return r.a.createElement(te.a,{id:"Post",key:t._id},r.a.createElement(te.a,{left:!0},r.a.createElement(te.a,{object:!0,src:se.a,alt:"No Image",id:"thumbnail"})),r.a.createElement(te.a,{body:!0,id:"postText"},r.a.createElement(te.a,{key:t._id,id:"postTitle",onClick:function(){return e.props.handleaddPostData(e.getPostData(t._id)[0])},heading:!0,style:{textDecoration:"none"}},r.a.createElement("span",{id:"postDate"},r.a.createElement(le.a,{format:"MMM D"},t.updatedAt))," ",r.a.createElement(y.b,{to:"/post"},t.title)),r.a.createElement("span",{id:"postPrice"},"$".concat(t.price.$numberDecimal))," ",r.a.createElement("span",{id:"postCommunity"},"(".concat(t.community,")")),e.props.user._id===t.author||e.props.user.admin?r.a.createElement("p",null,r.a.createElement(H.a,{id:"deletePost",onClick:function(){window.confirm("Are you sure you wish to delete your housing post?")&&(e.props.handleDeletePost(t._id,e.props.token),e.updatePosts(t._id))}},"DELETE"),e.props.user._id===t.author?r.a.createElement(H.a,{id:"updatePost",onClick:function(){e.setState({postId:t._id,title:t.title,description:t.description,community:t.community,price:t.price.$numberDecimal}),e.handleUpdatePostOnClick()}},"EDIT"):null):null))}))))}}]),t}(n.Component),me=Object(b.b)((function(e){return{token:e.auth.token,user:e.auth.user}}),(function(e){return{handleaddPostData:function(t){return e((a=t,function(e){e({type:"ADD_POST_DATA",postData:a})}));var a},handleCreateNewPost:function(t,a){return e(function(e,t){var a=e.title,n=e.description,r=e.community,o=e.price;return function(e){var s={headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*",crossDomain:!0,Authorization:"Bearer ".concat(t)}},i=JSON.stringify({title:a,description:n,community:r,price:o});d.a.post("/posts",i,s).then((function(t){console.log("CREATE POST \n"),console.log(t),e({type:"NEW_POST_SUCCESS",payload:t.data})})).catch((function(t){e({type:"NEW_POST_FAIL"})}))}}(t,a))},handleUpdatePost:function(t,a,n){return e(function(e,t,a){var n=e.title,r=e.description,o=e.community,s=e.price;return function(e){var i={headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*",crossDomain:!0,Authorization:"Bearer ".concat(a)}},l=JSON.stringify({title:n,description:r,community:o,price:s});d.a.patch("/posts/".concat(t),l,i).then((function(t){console.log("UPDATE POST \n"),console.log(t),e({type:"UPDATE_POST_SUCCESS",payload:t.data})})).catch((function(t){e({type:"UPDATE_POST_FAIL"})}))}}(t,a,n))},handleDeletePost:function(t,a){return e(function(e,t){return function(a){var n={headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*",crossDomain:!0,Authorization:"Bearer ".concat(t)}};d.a.delete("/posts/".concat(e),n).then((function(e){console.log("DELETE POST \n")}))}}(t,a))}}}))(ue),pe=(a(118),a(141)),de=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[],content:""},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.handleCommentButton=function(e){a.props.createNewComment(a.props.postData._id,a.props.user._id,a.state.content,a.props.token),a.setState({content:""})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"CommentsToState",value:function(){var e=this,t={headers:{crossDomain:!0,Authorization:"Bearer ".concat(this.props.token)}};JSON.stringify({});try{d.a.get("/comments/"+this.props.postData._id,t).then((function(t){console.log("COMMENTS: ",t.data),e.setState({comments:t.data})}))}catch(a){console.log(a)}}},{key:"requiredFieldsFilled",value:function(){return this.state.content.length>0}},{key:"componentDidMount",value:function(){this.CommentsToState()}},{key:"componentDidUpdate",value:function(){this.CommentsToState()}},{key:"render",value:function(){var e=this;return r.a.createElement(F.a,{fluid:!0,id:"wholePostWrapper"},r.a.createElement(q.a,null,r.a.createElement(M.a,{sm:"8"},r.a.createElement("div",{id:"postWrapper"},r.a.createElement("header",null,r.a.createElement("h1",{id:"title"},null!=this.props.postData?this.props.postData.title:null),r.a.createElement("p",{id:"poster"},null!=this.props.postData?this.props.postData.name:null),r.a.createElement("p",{id:"date"},r.a.createElement(le.a,{fromNow:!0},this.props.postData.updatedAt)," ")),r.a.createElement("p",{id:"description"},null!=this.props.postData?this.props.postData.description:null),r.a.createElement("img",{id:"postPicture",src:se.a}))),r.a.createElement(M.a,{sm:"4"},r.a.createElement("div",{id:"commentWrapper"},r.a.createElement(pe.a,{responsive:"md",borderless:!0,variant:"true"},r.a.createElement("tbody",{id:"commentBody"},this.state.comments&&this.state.comments.map((function(e,t){var a=e.name,n=e.content;return r.a.createElement("tr",{key:t},r.a.createElement("td",{id:"author"},a),r.a.createElement("td",{id:"comment"},n))})))),r.a.createElement("div",{id:"commentTextBox"},r.a.createElement("textarea",{id:"commentTextField",name:"content",rows:"3",value:this.state.content,onChange:this.onChange,maxlength:"200"})),r.a.createElement(H.a,{id:"postCommentButton",onClick:function(){e.handleCommentButton()}},"Post Comment")))))}}]),t}(n.Component),he=Object(b.b)((function(e){return{token:e.auth.token,user:e.auth.user,postData:e.post.postData}}),(function(e){return{createNewComment:function(t,a,n,r){return e((o=t,s=a,i=n,l=r,function(e){console.log("Preparing to create new comment"),console.log(i);var t={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(l)}},a=JSON.stringify({post:o,author:s,content:i});console.log("body is ".concat(a,")")),d.a.post("/comments/createComment",a,t).then((function(t){e({type:"NEW_COMMENT_SUCCESS",payload:t.data})})).catch((function(t){e({type:"NEW_COMMENT_FAIL"})}))}));var o,s,i,l}}}))(de),Ee=(a(119),a(44)),fe=a(64),ge=a(142),ye=a(143),be=a(144),Ce=a(145),Oe=(a(120),[{src:"http://ktgy.com/wp-content/uploads/2017/08/Plaza-Verde-UCI-American-Campus-Communities-Undergraduate-Student-Housing-KTGY-16-2000x1335.jpg",altText:"Plaza Verde",caption:"Plaza Verde"},{src:"http://ktgy.com/wp-content/uploads/2015/11/UC-Irvine-Puerta-del-Sol_00-5_-2000x1260.jpg",altText:"Puerta Del Sol",caption:"Puerta Del Sol"},{src:"https://static.wixstatic.com/media/6098a4_dd706b2c3a1f4495960ef27a7b581b6c.jpg",altText:"Vista Del Campo Norte",caption:"Vista Del Campo Norte"},{src:"http://ktgy.com/wp-content/uploads/2015/11/UC-Irvine-Camino-del-Sol_00-4-2000x1332.jpg",altText:"Camino Del Sol",caption:"Camino Del Sol"},{src:"https://static.wixstatic.com/media/47443b_3504201c6bec4f37a93314ae1e356b2c.jpg",altText:"Vista Del Campo",caption:"Vista Del Campo"}]),ve=function(e){var t=Object(n.useState)(0),a=Object(Ee.a)(t,2),o=a[0],s=a[1],i=Object(n.useState)(!1),l=Object(Ee.a)(i,2),c=l[0],u=l[1],m=function(){if(!c){var e=o===Oe.length-1?0:o+1;s(e)}},p=function(){if(!c){var e=0===o?Oe.length-1:o-1;s(e)}},d=Oe.map((function(e){return r.a.createElement(fe.a,{onExiting:function(){return u(!0)},onExited:function(){return u(!1)},key:e.src},r.a.createElement("img",{className:"d-block w-100",src:e.src,alt:e.altText}),r.a.createElement(ge.a,{captionText:e.caption}))}));return r.a.createElement(ye.a,{activeIndex:o,next:m,previous:p},r.a.createElement(be.a,{items:Oe,activeIndex:o,onClickHandler:function(e){c||s(e)}}),d,r.a.createElement(Ce.a,{direction:"prev",directionText:"Previous",onClickHandler:p}),r.a.createElement(Ce.a,{direction:"next",directionText:"Next",onClickHandler:m}))},we=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"space"},r.a.createElement(ve,null),r.a.createElement("div",{id:"body-text"},"Every year there are many students who are unable to find housing, at On The House we aim to fix this. On The House is a service that allows students to sublease their properties through creating personalized posts. Here, students can connect with the corresponding subleasers to continue the process of subleasing privately. We are dedicated to helping you find your new home!"))}}]),t}(n.Component),Se=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props);var e="Bearer "+this.props.location.search.split("=")[1];this.props.handleVerify(e)}},{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement(g.a,{to:"/"}));return console.log("After verification, isAuthenticated is now ".concat(this.props.isAuthenticated)),r.a.createElement("div",{style:{marginTop:"150px"}},this.props.bypassVerify?e:r.a.createElement("div",null,r.a.createElement("h1",null,"Verification status pending"),r.a.createElement(y.b,{to:"/"},"Return to Homepage")))}}]),t}(n.Component),je=Object(b.b)((function(e){return{authAction:e.auth,bypassVerify:e.auth.bypassVerify,isAuthenticated:e.auth.isAuthenticated,error:e.error}}),(function(e){return{handleVerify:function(t){return e((a=t,function(e){console.log("verifying user");var t={headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*",crossDomain:!0,Authorization:a}},n=JSON.stringify({});console.log("attempting to verify with token ".concat(n)),d.a.post("/users/verify",n,t).then((function(t){e({type:"VERIFICATION_SUCCESS",payload:t.data})})).catch((function(e){console.log(e)}))}));var a}}}))(Se),Ne=a(67),De=Object(b.b)((function(e){return{authAction:e.auth,isAuthenticated:e.auth.isAuthenticated,userObject:e.auth.user,error:e.error}}))((function(e){var t=e.isAuthenticated,a=(e.userObject,e.component),n=Object(Ne.a)(e,["isAuthenticated","userObject","component"]);return r.a.createElement(g.b,Object.assign({},n,{render:function(e){return console.log("props.whatever is ".concat(t)),t?r.a.createElement(a,e):r.a.createElement(g.a,{to:{pathname:"/users/login"}})}}))})),Pe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).redirectToPostTable=function(e){return r.a.createElement(g.a,{to:"/posttable"})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.a,null,r.a.createElement(B,null),r.a.createElement(f.a,{title:"On The House"}),r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/",component:ee}),r.a.createElement(g.b,{exact:!0,path:"/about",component:we}),r.a.createElement(g.b,{path:"/verify",component:je}),r.a.createElement(g.b,{exact:!0,path:"/users/login",component:J}),r.a.createElement(De,{path:"/posttable",component:me}),r.a.createElement(g.b,{exact:!0,path:"/post",component:he}),r.a.createElement(g.a,{to:"/"}))))}}]),t}(n.Component),Ae=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){Ge.dispatch((function(e,t){e({type:"USER_LOADING"})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Pe,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ke=a(65),Te=a(66),Ie=a(30),_e={msg:{},status:null,id:null};function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xe(a,!0).forEach((function(t){Object(R.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Be={token:localStorage.getItem("token"),isAuthenticated:!1,bypassVerify:null,showVerificationWarning:!1,isLoading:!1,user:null};function Re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Re(a,!0).forEach((function(t){Object(R.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Re(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Me={postData:null};a(121);d.a.defaults.baseURL="https://dev-oth-api.herokuapp.com/";var Ve=[ke.a],Le=Object(Ie.combineReducers)({error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case"CLEAR_ERRORS":return{msg:{},status:null,id:null};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Ue({},e,{isLoading:!0});case"USER_LOADED":return Ue({},e,{isAuthenticated:!0,isLoading:!1,user:t.payload});case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.token),Ue({},e,{},t.payload,{isAuthenticated:!0,isLoading:!1,bypassVerify:null});case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),Ue({},e,{},t.payload,{isAuthenticated:!0,isLoading:!1,bypassVerify:null,showVerificationWarning:!0});case"VERIFICATION_SUCCESS":return Ue({},e,{bypassVerify:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":case"REGISTER_FAIL":return localStorage.removeItem("token"),Ue({},e,{token:null,user:null,isAuthenticated:!1,isLoading:!1,bypassVerify:null});case"USER_CONFIRMED_VERIFICATION":return Ue({},e,{bypassVerify:!1});case"USER_DISMISSED_VERIFICATION_WARNING":return Ue({},e,{showVerificationWarning:!1});default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST_DATA":case"NEW_POST_SUCCESS":case"UPDATE_POST_SUCCESS":return Fe({},e,{postData:t.postData});case"NEW_POST_FAIL":case"UPDATE_POST_FAIL":default:return e}}}),We=Object(Ie.createStore)(Le,Object(Te.composeWithDevTools)(Ie.applyMiddleware.apply(void 0,Ve))),Ge=t.default=We;s.a.render(r.a.createElement(b.a,{store:We},r.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},35:function(e,t,a){e.exports=a.p+"static/media/image.33ee9ff6.jpg"},60:function(e,t,a){e.exports=a.p+"static/media/OnTheHouseLogo.6c23a8dc.png"},68:function(e,t,a){e.exports=a(122)},73:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.d5248056.chunk.js.map